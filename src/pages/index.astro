---
import LayoutMain from "^layouts/LayoutMain.astro";
import BeforeCommunityDay from "^components/landing/BeforeCommunityDay.astro";
import StreamingWeekendBefore from "^components/landing/StreamingWeekend-0Before.astro";
import StreamingWeekendDuring from "^components/landing/StreamingWeekend-1During.astro";
import { EventWindow } from "^scripts/EventWindow";
import "^styles/index.scss";

const eventCommunityDay = new EventWindow('CommunityDay');
const eventStreamingWeekend = new EventWindow('StreamingWeekend');
---

<LayoutMain>
    {!eventCommunityDay.hasStarted && !eventCommunityDay.hasEnded && <BeforeCommunityDay />}
    {eventCommunityDay.hasEnded && !eventStreamingWeekend.hasStarted && <StreamingWeekendBefore />}
    {eventStreamingWeekend.hasStarted && !eventStreamingWeekend.hasEnded && <StreamingWeekendDuring />}

    {!eventStreamingWeekend.hasEnded && <>
        <h2 style="margin-top: 1.5em;">Our PlayStation 5 raffle is live!</h2>
        <button id="raffle" class="action"><a href="/raffle">Purchase raffle entry</a></button>
    </>}

    <footer slot="footer" class="links">
        <a href="/about">About</a>
        <a href="/events">Events</a>
        <a href="https://drive.google.com/file/d/1woehpLxbbm6qA3mQ_9yyewZ7Ng-p61lp/view?usp=share_link">Sponsorship Info <i class="fa-solid fa-file-pdf"></i></a>
        <a href="/contact">Contact</a>
        <a href="https://discord.gg/pzcG2w8qTu">Join our <i class="fa-brands fa-discord"></i> Discord</a>
    </footer>

<script is:inline>
document.addEventListener('DOMContentLoaded', () => {
    document.getElementById('raffle').addEventListener('click', () => {
        location.href = '/raffle';
    });
});
</script>
 </LayoutMain>
