---
import LayoutBlank from "^layouts/LayoutBlank.astro";
import "^styles/golf/golf.scss"
---
<LayoutBlank title="G&G GWYF Handicaps">
  <div class="background">
    <div class="sky"></div>
    <div class="green"></div>
  </div>

  <div class="handicaps-container">
    <table>
      <thead>
        <tr>
          <th>Fundraiser</th>
          <th>Handicap</th>
        </tr>
      </thead>
      <tbody id="handicaps">
      </tbody>
    </table>
  </div>

  <script>
    import { getGolfHandicaps, sortByFundraiser } from "^components/tiltify/Tiltify";

    document.addEventListener("DOMContentLoaded", () => {
      const handicapsEl = document.getElementById('handicaps') as HTMLTableSectionElement;
      handicapsEl.innerHTML = '';

      const handicaps = [
      {
        "fundraiser": "Bostwic",
        "handicap": 0
      },
      {
        "fundraiser": "BurgerBunn",
        "handicap": 2
      },
      {
        "fundraiser": "DreadLore",
        "handicap": 0
      },
      {
        "fundraiser": "Kymichelle",
        "handicap": 1
      },
      {
        "fundraiser": "Meehandlebars",
        "handicap": 2
      },
      {
        "fundraiser": "MntRat27",
        "handicap": 0
      },
      {
        "fundraiser": "RoskMan8",
        "handicap": 3
      },
      {
        "fundraiser": "celestial_octopus",
        "handicap": 1
      },
      {
        "fundraiser": "kharites_",
        "handicap": 10
      },
      {
        "fundraiser": "kyfrieddice",
        "handicap": 5
      },
      {
        "fundraiser": "mlewis317",
        "handicap": 1
      },
      {
        "fundraiser": "nshew13",
        "handicap": 0
      },
      {
        "fundraiser": "rwevans",
        "handicap": 0
      },
      {
        "fundraiser": "xbasicxwitchx",
        "handicap": 0
      },
      {
        "fundraiser": "xbasicxwitchx",
        "handicap": 0
      }
      ];

      // getGolfHandicaps().then((handicaps) => {
        console.log('adding handicaps', handicaps);

        handicaps.sort(sortByFundraiser).forEach((handicap) => {
          const col1 = document.createElement('td');
          col1.appendChild(document.createTextNode(handicap.fundraiser));
          const col2 = document.createElement('td');
          col2.appendChild(document.createTextNode(handicap.handicap.toString()));

          const newRow = handicapsEl.insertRow();
          newRow.appendChild(col1);
          newRow.appendChild(col2);
        });
      // });
    });
  </script>
</LayoutBlank>
