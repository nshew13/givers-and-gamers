---
import type { ScheduleEvent } from "^types/index";
import LayoutMain from "^layouts/LayoutMain.astro";
import Event from "^components/schedule/Event.astro";
import "^styles/schedule.scss";
import scheduleData from "./schedule.data.json";

const pageTitle = "Schedule";
const sortCompareDateTime = (a: ScheduleEvent, b: ScheduleEvent) => {
    if (a.datetime < b.datetime) {
        return -1;
    } else if (a.datetime > b.datetime) {
        return 1;
    }
    return 0;
};
---
<LayoutMain subtitle={ pageTitle }>
  <h1>{ pageTitle }</h1>
  <div id="countdown"></div>

  <section class="schedule">
    <h2>Every Day
       <span class="toggleAccordion"><i id="toggleEveryDay" class="fa-solid fa-square-caret-down"></i></span>
    </h2>
    <div id="accordionEveryDay" class="accordion">
      { scheduleData.all.sort(sortCompareDateTime).map(event => <Event event={ event }></Event>) }
    </div>
  </section>

  <section id="day1" class="schedule">
    <h2>
      <span class="nav disabled"><i class="fa-solid fa-square-caret-left"></i></span>
      Day 1
      <span id="next2" class="nav"><i class="fa-solid fa-square-caret-right"></i></span>
    </h2>
      { scheduleData.day1.sort(sortCompareDateTime).map(event => <Event event={ event }></Event>) }
  </section>

  <section id="day2" class="schedule">
    <h2><span id="prev1" class="nav">
      <i class="fa-solid fa-square-caret-left"></i></span>
      Day 2
      <span id="next3" class="nav"><i class="fa-solid fa-square-caret-right"></i></span>
    </h2>
      { scheduleData.day2.sort(sortCompareDateTime).map(event => <Event event={ event }></Event>) }
  </section>

  <section id="day3" class="schedule">
    <h2>
      <span id="prev2" class="nav"><i class="fa-solid fa-square-caret-left"></i></span>
      Day 3
      <span class="nav disabled"><i class="fa-solid fa-square-caret-right"></i></span>
    </h2>
      { scheduleData.day3.sort(sortCompareDateTime).map(event => <Event event={ event }></Event>) }
  </section>

<script>
import "^scripts/schedule";
</script>
</LayoutMain>
